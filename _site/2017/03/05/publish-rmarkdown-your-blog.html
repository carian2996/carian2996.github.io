<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Publish your Analysis in a Blog</title>
  <meta name="description" content="This work is based on Jon Zelner’s blog.">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic|Source+Sans+Pro:400,700,200,300|Josefin+Sans:400,600,700,300' rel='stylesheet' type='text/css'>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://localhost:4000/2017/03/05/publish-rmarkdown-your-blog.html">
  <link rel="alternate" type="application/rss+xml" title="Ian CR" href="http://localhost:4000/feed.xml">
</head>


  <body>

    
<div class="wrapper">
  <center> <a href="/index.html"><div class="site-title">   Ian CR </div></a></center>
</div>
<div class="wrapper site-description">
<center>   </center>
</div>
<div class="wrapper">
  <div class="trigger site-navigation">
    <a class="page-link" href="http://localhost:4000">HOME</a>

    
    

    <span class="exclamationMark">/</span><a class="page-link" href="/about/">About Me</a>
    
    
    
    
    
    
    
    
  </div>
</div>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline"><a class="post-title-link"  href="/2017/03/05/publish-rmarkdown-your-blog.html">Publish your Analysis in a Blog</a></h1>
  <center>  <p class="post-meta"><time datetime="2017-03-05T14:00:00-06:00" itemprop="datePublished">Mar 5, 2017</time></p>
    
   </center>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>This work is based on <a href="http://www.jonzelner.net/jekyll/knitr/r/2014/07/02/autogen-knitr/">Jon Zelner</a>’s blog.</p>

<p>Sharing your analysis can be an excellent way to learn from others (from commentaries, suggestions and criticism) and also collaborate with your discoveries. One simple way to do that is publish on a personal blog and share it with your friends.</p>

<p>In this entry you will learn how to:</p>

<ol>
  <li>Create a personal web page to store your papers.</li>
  <li>Manage and personalize your blog page.</li>
  <li>Publish automatically your RMarkdown files in your blog.</li>
</ol>

<p>Let’s start!</p>

<p><br /></p>

<hr />
<h2 id="1-create-a-personal-web-page">1. Create a personal web page</h2>
<p>Nowadays create a web page can be really easy. We will work with <a href="https://github.com/">Github</a>, that works as host, and there we will deploy our blog.</p>

<p>The first thing we have do is create an account on Github. You can learn more about Github <a href="https://techcrunch.com/2012/07/14/what-exactly-is-github-anyway/">here</a> and after that, maybe some reading about the Github’s core, a really cool project call <a href="https://git-scm.com/">Git</a>.</p>

<p><br />
<img src="http://localhost:4000/assets/signup-githup.png" alt="signup" class="center-image" height="250px" width="250px" />
<br /></p>

<p><strong>Tip: Choose wisely your username, it will be part of the URL for your blog</strong>. Once you have signed and created an account you will need to create a new repository and convert it into your new web page. Simply navigate into your repositories and create a new one:</p>

<p><br />
<img src="http://localhost:4000/assets/new-repo.png" alt="new-repo" class="center-image" />
<br /></p>

<p><strong>You should name the new repository like this: username.github.io</strong>. This will be the URL direction for your page: <code class="highlighter-rouge">http://username.github.io</code>. Finally create a new file called <code class="highlighter-rouge">index.html</code> with the following sentence <code class="highlighter-rouge">&lt;h1&gt;Hello world!&lt;/h1&gt;</code>.</p>

<p><br />
<img src="http://localhost:4000/assets/index.png" alt="index" class="center-image" />
<br /></p>

<p>Add a nice description for the change in your repository and commit it.</p>

<p><br />
<img src="http://localhost:4000/assets/commit.png" alt="commit" class="center-image" />
<br /></p>

<p>Why should we did all those steps? You can find how Git works in <a href="https://try.github.io/levels/1/challenges/1">this</a> nice tutorial. Of course, learn how Git and Github work also will help you to gain a valuable skill for the future.</p>

<p>So, that’s all! You can put <code class="highlighter-rouge">http://username.github.io.</code> in your browser and admire your creation!</p>

<p><br /></p>

<hr />
<h2 id="2-personalize-your-blog">2. Personalize your blog.</h2>
<p>To get started, we should work locally before upload our changes. To do that we need to clone our repository hosted in Github. You can learn more about cloning repositories <a href="https://help.github.com/articles/cloning-a-repository/">here</a>. You can use <a href="https://www.gitkraken.com/">Gitkraken</a> (a nice GUI for managing your Github repositories). Once you have cloned (or just downloaded) the repository, your local folder should look like this:</p>

<p><br />
<img src="http://localhost:4000/assets/local.png" alt="local" class="center-image" />
<br /></p>

<p>Now you can find a theme for your blog and put it into your folder. Search <a href="http://google.com/#q=jekyll+themes">here</a> for cool themes. We will use the basic theme <a href="https://github.com/poole/poole">Poole</a>. Again, clone or download the Poole repository into your blog folder, it should looks like this (with a bunch of strange folders) and an important file called <code class="highlighter-rouge">_config.yml</code>:</p>

<p><br />
<img src="http://localhost:4000/assets/poole.png" alt="poole" class="center-image" />
<br /></p>

<p>You can start changing this <code class="highlighter-rouge">_config.yml</code> file to set your blog title, author name, social media and <a href="http://jekyllrb.com/docs/configuration/">more</a>. But, how can I see my changes before deploying them into Github? Well, if you want to see locally your page, you will need to install the following dependencies:</p>

<ol>
  <li><a href="https://www.ruby-lang.org/es/">Ruby</a> (The programming language used).</li>
  <li><a href="https://rubygems.org/">Gems</a> (Ruby community’s gem hosting service. Gem == package).</li>
  <li><a href="https://jekyllrb.com/">Jekyll</a> (Jekyll is a simple, blog-aware, static site generator).</li>
</ol>

<p>If you have read until here, you should be able to run the <strong>Jekyll</strong> server and view your blog locally on <code class="highlighter-rouge">localhost:4000</code>. Simply use the following sentences to run the blog:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>your/path/to/blog
jekyll server
</code></pre>
</div>

<p>And that is how (locally) your blog should looks like:</p>

<p><br />
<img src="http://localhost:4000/assets/local-blog.png" alt="local-blog" class="center-image" />
<br /></p>

<p><strong>Tip: Don’t forget to set</strong> <code class="highlighter-rouge">url: "https://username.github.io"</code> <strong>in your</strong> <code class="highlighter-rouge">_config.yml</code> <strong>file to properly establish your root.</strong></p>

<p>The only folder you need to modify in order to publish your reports is the <code class="highlighter-rouge">./_posts/</code> folder. Here, every markdown document would be consider as a entry in your blog. For example if you create a markdown file called <code class="highlighter-rouge">2017-02-19-welcome.markdown</code> and inside you write:</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="nn">---</span>
<span class="s">layout</span><span class="pi">:</span> <span class="s">post</span>
<span class="s">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Welcome!"</span>
<span class="s">date</span><span class="pi">:</span> <span class="s">2017-02-19 12:00</span>
<span class="nn">---</span>

Hello, this is my blog. 
</code></pre>
</div>

<p>You should be able to see the new entry like this:</p>

<p><br />
<img src="http://localhost:4000/assets/new-post.png" alt="new-post" class="center-image" />
<br /></p>

<p>Lets deploy this simple entry. <a href="https://try.github.io/levels/1/challenges/8">Commit</a> and <a href="https://try.github.io/levels/1/challenges/11">push</a> your changes into Github (use Gitkraken to simplify those steps) and then you can go to <code class="highlighter-rouge">https://yourusername.github.io/2017/02/19/welcome/</code> to see your first post.</p>

<p><strong>Tip: If you have experience with HTML and CSS or YMAL use it for customize your blog</strong>. More info <a href="https://jekyllrb.com/docs/frontmatter/">here</a> and <a href="https://webdesign.tutsplus.com/tutorials/how-to-set-up-a-jekyll-theme--cms-26332">here</a>.</p>

<p><br /></p>

<hr />
<h2 id="3-automate-your-publishing">3. Automate your publishing.</h2>

<p>Alright, now we have our blog settled, we can automate our publishing process with Rmarkdown files. First we need to create a new file called <code class="highlighter-rouge">render_post.R</code> (it should be located in the blog’s root folder):</p>

<p><br /></p>
<noscript><pre># Modified from Jon Zelner&#39;s original code

#!/usr/bin/env Rscript

input &lt;- commandArgs(trailingOnly = TRUE)
KnitPost &lt;- function(input, base.url = &quot;/&quot;) {
    require(knitr)
    opts_knit$set(base.url = base.url)
    fig.path &lt;- paste0(&quot;../figs/&quot;, sub(&quot;.Rmd$&quot;, &quot;&quot;, basename(input)), &quot;/&quot;)
    opts_chunk$set(fig.path = fig.path)
    opts_chunk$set(fig.cap = &quot;center&quot;)
    render_jekyll()
    print(paste0(&quot;../_posts/&quot;, sub(&quot;.Rmd$&quot;, &quot;&quot;, basename(input)), &quot;.markdown&quot;))
    knit(input, output = paste0(&quot;../_posts/&quot;, 
                                Sys.Date(), 
                                &#39;-&#39;, 
                                sub(&quot;.Rmd$&quot;, &quot;&quot;, basename(input)), &quot;.markdown&quot;), 
         envir = parent.frame())
}

KnitPost(input)</pre></noscript>
<script src="https://gist.github.com/carian2996/a04c113cd13571689d42333dad55c755.js"> </script>

<p><br /></p>

<p>The previous function will take the <code class="highlighter-rouge">Rmd</code> file containing the analysis, it will run the file with R and will generate the possible outcomes (like images, tables or something else) to store them in a specific folder and finally, will put a <code class="highlighter-rouge">markdown</code> file in the <code class="highlighter-rouge">_post</code> folder.</p>

<p><strong>Tip: In your Rmarkdown only set the title and date and one parameter <code class="highlighter-rouge">layout:</code> as <code class="highlighter-rouge">post</code>.</strong></p>

<p>Use the RStudio’s example Rmarkdown file to test the function. First, open RStudio and create a new Rmarkdown. You can allocate your analysis in a folder named <code class="highlighter-rouge">_knitr</code>. Your blog’s structure should look like this:</p>

<p><br />
<img src="http://localhost:4000/assets/test-rmd.png" alt="test-rmd" class="center-image" width="250px" />
<br /></p>

<p>Finally, you need to be able to run the <code class="highlighter-rouge">render_post.R</code> as a function in you computer, use the following command to do that:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">cd</span> /your/that/to/blog
sudo chmod +x render_post.R
</code></pre>
</div>

<p>After this, you need to run the R function with your <code class="highlighter-rouge">test.Rmd</code>. Move into you <code class="highlighter-rouge">_knitr</code> folder and run with the next command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>_knitr
Rscript ../render_post.R test.Rmd
</code></pre>
</div>

<p>Now your Rmarkdown is on your blog! Some files should be added like this:</p>

<p><br />
<img src="http://localhost:4000/assets/render.png" alt="render" class="center-image" width="250px" />
<br /></p>

<hr />

<p><br />
<img src="http://localhost:4000/assets/render2.png" alt="render2" class="center-image" />
<br /></p>

<p><strong>Tip: Remember that your are working locally… The last step is commit your changes with git and push them into your remote repository (on Github), once you will do that, you can go to <code class="highlighter-rouge">https://username.github.io</code> and check your great work :)</strong></p>

<p>Congrats! Now you can work with your Rmarkdown files and just copy those files into your <code class="highlighter-rouge">_knitr</code> folder and run again the magic function. Have fun!</p>

  </div>

  <footer class="postNavigation">
  
  
  </footer>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading small-site-title">Ian CR</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list footer-content">
          <li>Powered By <a href="http://github.com/hemangsk/Gravity">Gravity</a></li>
          <li>Made with <i class="fa fa-heart"></i> on <a href="http://jekyllrb.com"><span style="color:black">{ { Jekyll } }</a></span></li>


        </ul>
      </div>

      <div class="footer-col footer-col-2 footer-content">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/carian2996"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">carian2996</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/carian_2996"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">carian_2996</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3 site-description">
        <p></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
